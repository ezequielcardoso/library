<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>

    <constant name="struts.enable.DynamicMethodInvocation" value="false" />
    <constant name="struts.devMode" value="false" />

	<!--导入struts-default.xml文件 -->
	<include file="struts-default.xml"></include>
	<!--导入各模块Action配置文件 -->
	<include file="rights.xml"></include>
	<include file="book.xml"></include>
	<include file="reader.xml"></include>
	<include file="system.xml"></include>
	<include file="borrowReturn.xml"></include>
	<include file="preOrder.xml"></include>
	
	<!-- 中文支持等配置 -->
	<constant name="struts.custom.i18n.resources"
		value="ApplicationResources" />
	<constant name="struts.i18n.encoding" value="utf-8" />
	<constant name="struts.i18n.reload" value="false"></constant>
	<constant name="struts.action.extension" value="action" />
	<constant name="struts.multipart.maxSize" value="500000000" />
	<constant name="struts.multipart.saveDir" value="/tmp" />
	
    <package name="library" namespace="/" extends="json-default">
		
		<action name="loginVerify" class="com.huan.library.web.action.UserAction" method="loginVerify">
			<result name="success" type="json">
				<param name="root">extJsonForm</param>
			</result>
			<result name="error" >/login.jsp</result>
		</action>
    </package>

	<package name="file" namespace="/file" extends="library">
	
	     <interceptors>
	       <interceptor name="fileDeleteInterceptor" class="com.huan.library.application.interceptor.FileDeleteInterceptor"></interceptor>
	     </interceptors>
	
		<!--文件下载-->
		<action name="downloadFile" class="com.huan.library.web.action.BaseActionSupport"
			method="downloadFile">
			<result name="success" type="stream">
				<!-- 对应BaseActionSupport中的属性contentType -->  
	            <param name="contentType">${contentType}</param> 
	            <!-- BaseActionSupport中对应的InputStream的属性名 -->  
	            <param name="inputName">fileStream</param>  
	            <!-- 对应BaseActionSupport中的属性fileName，定义流输出格式 -->  
	            <param name="contentDisposition">${fileName}</param>  
	            <!-- 定义bufferSize，可选 -->  
	            <param name="bufferSize">1024</param>  			
			</result>
			<!-- 配置拦截器 -->
			<!-- 默认拦截器 -->
			 <interceptor-ref name="defaultStack"/> 
			<!-- 文件删除拦截器 -->
           	 <interceptor-ref name="fileDeleteInterceptor"/> 
		</action>
		
		<!--文件上传-->
		<action name="uploadFile" class="com.huan.library.web.action.BaseActionSupport"
			method="uploadFile">
			<result name="success" type="json">
				<param name="root">ejf</param>
			</result>
		</action>
		
		<!--文件上传-->
		<action name="uploadFiles" class="com.huan.library.web.action.BaseActionSupport"
			method="uploadFiles">
			<result name="success" type="json">
				<param name="root">ejf</param>
			</result>
		</action>
		
		<!--文件上传-->
		<action name="uploadFilesByStream" class="com.huan.library.web.action.BaseActionSupport"
			method="uploadFilesByStream">
			<result name="success" type="json">
				<param name="root">ejf</param>
			</result>
		</action>
		
	</package>

</struts>
